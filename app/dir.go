package main

import (
	"simplex/geom"
	"simplex/constdp"
	"fmt"
)

func main() {
	wkt := "LINESTRING ( 400 560, 520 660, 620 600, 720 640, 760 500, 680 460, 720 420, 780 400, 720 360, 580 340, 440 400, 380 440, 440 500, 400 560 )"
	ctx := geom.NewLineStringFromWKT(wkt)

	//wkt_a := "LINESTRING ( 980 280, 981.3546694489717 324.82716460080917, 1006.1665140838959 336.10527579850196, 1026.4671142397428 362.0449315531954, 1017.4446252815886 410.5408097032744, 982.4824805687409 427.45797649981364, 947.5203358558933 470.31479905104624, 948.6481469756626 585.3515332675128, 921.5806801011998 611.2911890222063, 906.9191355441992 613.5468112617448, 843.7617128371196 666.5539338909009, 734.3640342194994 743.245090035212, 700 750, 650 750, 465.94498771441084 773.6959902689825, 412.93786508525466 739.8616566759041, 385.87039821079196 720.6888676398264, 361.0585535758678 717.3054342805185, 346.29722623487015 749.9852989139027, 315.5582431228852 768.0047028071353, 275.2795755968359 771.1845976118235, 246.660522354643 707.5867015180614, 265.00252427153964 657.6454550927426, 220.85197491460565 627.9662944103014, 156.8861009121442 574.9681901708519, 118.727363255887 505.01050446771376, 143.10655675849577 442.47257330884776, 122.96722299547113 361.9152382567492, 132.50690740953544 334.35614994945234, 193.01469673024513 224.45197494134325, 216.6987302454 210.9182415041119, 232.48808592216992 168.06141895287928, 300.1567531083267 120.69335192256952 )"
	wkt_b := "LINESTRING ( 310 540, 460 710, 540 950, 500 1140, 600 1080, 660 930 )"
	//pln_a := polyln(wkt_a)
	pln_b := polyln(wkt_b)

	//fmt.Println(constdp.DirectionRelate(pln_a, ctx))//.Equal("TTTTFTTFT")
	fmt.Println(constdp.DirectionRelate(pln_b, ctx))//.Equal("FTFTTFFFF")


}

func polyln(wkt string) *constdp.Polyline {
	ln := geom.NewLineStringFromWKT(wkt)
	coords := ln.Coordinates()
	return constdp.NewPolyline(coords)
}
